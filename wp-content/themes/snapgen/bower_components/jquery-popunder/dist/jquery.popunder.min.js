/*! jquery-plugin to create popunders in major browsers., 0.2.30 https://github.com/hpbuniat/jquery-popunder
Copyright (c) 2015 Hans-Peter Buniat, BSD license https://github.com/hpbuniat/jquery-popunder/blob/master/LICENSE*/
!function(a,b,c,d,e){"use strict";a.popunder=function(c,d,e,f){var g=a.popunder.helper,h="undefined";if(0===arguments.length&&(c=b.aPopunder),e||d)g.bindEvents(c,d,e);else if(c="function"==typeof c?c(f):c,(g.ua.ie===!0||g.ua.g===!0)&&(c=g.handleTargetBlank(c,f)),g.reset(),typeof c!==h){do g.queue(c);while(c.length>0);g.queue(c)}return a},a.popunder.helper={_top:b.self,lastWin:null,lastTarget:null,f:!1,last:!1,b:"about:blank",o:null,du:"__jqpu",ua:{ie:!!/msie|trident/i.test(d.userAgent),oldIE:!!/msie/i.test(d.userAgent),ff:!!/firefox/i.test(d.userAgent),o:!!/opera/i.test(d.userAgent),g:!!/chrome/i.test(d.userAgent),w:!!/webkit/i.test(d.userAgent),fl:!!d.mimeTypes["application/x-shockwave-flash"]},m:{g:"tab"},hs:[],ns:"jqpu",def:{window:{toolbar:0,scrollbars:1,location:1,statusbar:1,menubar:0,resizable:1,width:(c.availWidth-122).toString(),height:(c.availHeight-122).toString(),screenX:0,screenY:0,left:0,top:0},name:"__pu",cookie:"__puc",blocktime:!1,skip:{"chrome/(4[1-9]|[5-9][d]).":!0,opera:!0,linux:!0,android:!0,iphone:!0,ipad:!0},cb:null,fs:!1,popup:!1},setMethod:function(a,b){var c=this;return c.m[a]=b,c},uaTest:function(a){return!!new RegExp(a,"i").test(d.userAgent.toString())},queue:function(a){var b=!1,c=this;if(a.length>0)for(;b===!1;){var d=a.shift();b=d?c.open(d[0],d[1]||{},a.length):!0}else c.last===!1?(c.last=!0,c.bg().href(!0)):c.f||c.ua.g||c.ua.ie||c.bg();return c},handler:function(a,b){var c=this;"function"==typeof c.hs[a]&&c.hs[a](b)},getTrigger:function(b){return a("#"+b).parents(".jq-pu").children().eq(0)},trigger:function(a){this.getTrigger(a).trigger("click")},bindEvents:function(b,c,d){var e=this,f="string",g=e.hs.length,h=function(a){return function(b){e.handler(a,b)}}(g);return e.hs[g]=function(b){return function(c){return c&&!c.target&&(c={target:e.getTrigger(c)}),a.popunder(b,!1,!1,c),!0}}(b),c&&!e.ua.g&&(c=typeof c===f?a(c):c,c.on("submit."+e.ns,h)),d&&(d=typeof d===f?a(d):d,d.on("click."+e.ns,h),e.ua.g&&e.def.fs&&e.ua.fl&&e.overlay(d,g)),e},overlay:function(b,c){var d=this;return b.each(function(){var b=a(this),e="absolute",f=b.css("position")===e?"":"position:relative;",g=d.rand("pub"),h=b.wrap('<div class="jq-pu" style="display:inline-block; '+f+'" />').parent(),i=a('<object id="'+g+'" type="application/x-shockwave-flash" data="'+d.def.fs+'" />').css(a.extend(!0,{},{position:e,cursor:"pointer",top:f?0:b.css("top"),left:f?0:b.css("left"),padding:b.css("padding"),margin:b.css("margin"),width:b.width(),height:b.height()}));i.append('<param name="wmode" value="transparent" />'),i.append('<param name="menu" value="false" />'),i.append('<param name="flashvars" value="id='+g+"&hs="+c+'" /">'),h.append(i)}),d},cookieCheck:function(b,c){var d=this,e=d.rand(c.cookie,!1),f=a.cookie(e),g=!1;return f?-1===f.indexOf(b)?f+=b:g=!0:f=b,a.cookie(e,f,{expires:new Date((new Date).getTime()+6e4*c.blocktime)}),g},rand:function(a,b){var c=this,d=a?a:c.du;return d+(b===!1?"":Math.floor(89999999*Math.random()+1e7).toString()).replace(".","")},open:function(c,d,e){var f,g,h,i=this,j="function";if(g=a.extend(!0,{},i.def,d),h=g.skip,i.o=c,top!==b.self)try{top.document.location.toString()&&(i._top=top)}catch(k){}for(f in h)if(h.hasOwnProperty(f)&&h[f]===!0&&i.uaTest(f))return!1;return g.blocktime&&typeof a.cookie===j&&i.cookieCheck(c,g)?!1:(i.ua.g===!0&&"simple"!==i.ua.g&&b.open("javascript:window.focus()","_self",""),c!==i.du&&(i.lastTarget=c,i.ua.g===!0&&"tab"===i.m.g?i.switcher.tab(i,i.o):i.lastWin=i._top.window.open(i.o,i.rand(g.name,!d.name),i.getOptions(g.window))||i.lastWin,i.ua.ff===!0&&i.bg(),i.href(e),typeof g.cb===j&&g.cb()),!0)},bg:function(a){var b=this;return b.lastWin&&b.lastTarget&&!a?b.ua.ie===!0?b.switcher.simple(b):b.ua.g||b.switcher.pop(b):"oc"===a&&b.switcher.pop(b),b},switcher:{simple:function(a){try{a.lastWin.blur()}catch(c){}b.focus()},pop:function(a){!function(b){try{a.f=b.window.open("about:blank"),a.f&&a.f.close()}catch(c){}try{b.opener.window.focus()}catch(c){}}(a.lastWin)},tab:function(c,d){var f=d?d:"data:text/html,<script>window.close();</script>;",g=!d,h=a("<a/>",{href:f}).appendTo(e.body),i=e.createEvent("MouseEvents");return g="tab"===c.m.g?!g:g,i.initMouseEvent("click",!0,!0,b,0,0,0,0,0,g,!1,!g,g,0,null),h[0].dispatchEvent(i),h[0].parentNode.removeChild(h[0]),c}},href:function(a){var b,c=this;return a&&c.lastTarget&&c.lastWin&&c.lastTarget!==c.b&&c.lastTarget!==c.o&&(c.ua.g===!0&&"simple"!==c.m.g?(b=c.lastWin.document,b.open(),b.write("<html><head><title>"+e.title+'</title><script type="text/javascript">window.location="'+c.lastTarget+'";</script></head><body></body></html>'),b.close()):c.lastWin.document.location.href=c.lastTarget),c},handleTargetBlank:function(b,c){if(c&&"undefined"!=typeof c.target){var d,e=this,f=null,g=a(c.target);g.is('input[type="submit"]')===!0&&(f=c.target.form),f&&"_blank"===f.target&&(d=e.du,e.ua.ie&&(d=f.action+"/?"+a(f).serialize()),b.unshift([d,{popup:!0}]))}return b},reset:function(){var a=this;return a.f=a.last=!1,a.lastTarget=a.lastWin=null,a},unbind:function(c,d){var e=this,f="string";return e.reset(),c=typeof c===f?a(c):c,c.off("submit."+e.ns),d=typeof d===f?a(d):d,d.off("click."+e.ns),b.aPopunder=[],e},getOptions:function(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(b+"="+a[b]);return c.join(",")}}}(jQuery,window,screen,navigator,document);